@use '@/styles/mixins' as *;

.wrapperMain {
	display: flex;
	flex-direction: column;
	height: calc(100vh - 4.125rem);
	min-height: calc(100vh - 4.125rem);
	width: 100%;
	padding: 1em 0;
	gap: 4.62em;

	&Header {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		flex: 0 0 auto;
		gap: 1em;
		width: 100%;

		&Title {
			color: var(--jh-green-04);
			font-size: 4rem;
			font-style: normal;
			font-weight: 500;
			line-height: 4.38rem;
		}

		&Description {
			color: var(--jh-gray-02);
			font-size: 1.63rem;
			font-style: normal;
			font-weight: 400;
			line-height: 2.8rem;
		}
	}

	&Searches {
		display: flex;
		flex-direction: flex-start;
		align-items: flex-start;
		flex: 1 1 auto;
		min-height: 0;
		width: 100%;
		gap: 0.75em;
		padding: 0 1.5em;
	}

	&Textarea {
		flex: 0 0 auto;
		width: 100%;
		padding: 0 1.5em;
	}
}

.wrapperSearch {
	display: flex;
	flex-direction: column;
	height: calc(100vh - 4.125rem);
	min-height: calc(100vh - 4.125rem);
	width: 100%;
	padding: 1em 0;
	gap: 1em;

	&Content {
		display: flex;
		justify-content: space-between;
		flex: 1 1 auto;
		width: 100%;
		gap: 5.44em;
		padding: 0 1.5em;
		min-height: 0;
		overflow-y: auto;

		&Answer {
			display: flex;
			flex: 1 1 auto;
			width: 100%;

			.chatMessages {
				display: flex;
				flex-direction: column;
				gap: 24px;
				width: 100%;
				height: 100%;
				overflow-y: auto;
				padding: 16px 0;
				scroll-snap-type: y proximity;
				scroll-behavior: smooth;
				scrollbar-width: none;
				-ms-overflow-style: none;

				&::-webkit-scrollbar {
					display: none;
				}

				// .qaContainer {
				// 	display: flex;
				// 	flex-direction: column;
				// 	gap: 12px;
				// 	width: 100%;
				// 	padding: 20px;
				// 	border-radius: 12px;
				// 	scroll-snap-align: start;
				// 	scroll-snap-stop: normal;
				// 	flex-shrink: 0;
				// }

				// .lastQaContainer {
				// 	min-height: 80vh;
				// 	padding: 35px 0 0 0;
				// }

				.message {
					display: flex;
					flex-direction: column;
					gap: 8px;
					width: 100%;
					scroll-snap-align: start;
					scroll-snap-stop: normal;
					min-height: fit-content;
					&.userMessage {
						align-items: flex-start;
						scroll-snap-align: start;

						.messageContent {
							color: var(--black);
							font-size: 26px;
							font-weight: 700;
							line-height: 38px;
						}
					}

					&.aiMessage {
						align-items: flex-start;
						scroll-snap-align: start;

						.messageContent {
							color: var(--black);
							font-size: 16px;
							font-weight: 400;
							line-height: 1.6;

							.typingIndicator {
								display: inline-flex;
								gap: 4px;
								margin-right: 8px;

								span {
									width: 6px;
									height: 6px;
									background-color: var(--jh-gray-02);
									border-radius: 50%;
									animation: typing 1.4s infinite ease-in-out;

									&:nth-child(1) {
										animation-delay: -0.32s;
									}
									&:nth-child(2) {
										animation-delay: -0.16s;
									}
									&:nth-child(3) {
										animation-delay: 0s;
									}
								}
							}

							ol.step-list {
								margin: 16px 0;
								padding-left: 0;
								list-style: none;

								li {
									position: relative;
									margin-bottom: 12px;
									padding-left: 40px;
									list-style: none;

									&::before {
										content: attr(data-step);
										position: absolute;
										left: 0;
										top: 0;
										background-color: var(--jh-green-04);
										color: white;
										width: 24px;
										height: 24px;
										border-radius: 50%;
										display: flex;
										align-items: center;
										justify-content: center;
										font-size: 12px;
										font-weight: 600;
										line-height: 1;
									}

									&:last-child {
										margin-bottom: 0;
									}

									// Source attribution for steps
									.source-attribution {
										display: inline-block;
										margin-left: 8px;
										padding: 2px 6px;
										background-color: transparent;
										color: var(--jh-green-04);
										font-size: 11px;
										font-weight: 500;
										border-radius: 4px;
										text-transform: uppercase;
										letter-spacing: 0.5px;
										cursor: pointer;
										transition: all 0.2s ease;
										text-decoration: none;
										border-left: 3px solid var(--jh-green-04);
										padding-left: 8px;

										&:hover {
											background-color: rgba(var(--jh-green-04-rgb), 0.1);
											color: var(--jh-green-02);
											text-decoration: none;
										}
									}
								}
							}

							p {
								margin-bottom: 8px;

								&:last-child {
									margin-bottom: 0;
								}
							}

							strong {
								color: var(--black);
								font-weight: 600;
							}

							h1,
							h2,
							h3,
							h4,
							h5,
							h6 {
								color: var(--jh-gray-02);
								margin: 16px 0 8px 0;
								font-size: 16px;
								font-weight: 400;
							}

							// Source attribution and links
							.source-link {
								display: inline-block;
								margin-left: 6px;
								padding: 2px 6px;
								background-color: var(--jh-green-01);
								color: var(--jh-green-04);
								font-size: 11px;
								font-weight: 500;
								border-radius: 4px;
								text-decoration: none;
								text-transform: uppercase;
								letter-spacing: 0.5px;
								transition: all 0.2s ease;
								border: 1px solid var(--jh-green-02);

								&:hover {
									background-color: var(--jh-green-04);
									color: white;
									text-decoration: none;
								}
							}

							.inline-link {
								color: var(--jh-green-04) !important;
								text-decoration: underline !important;
								text-decoration-color: var(--jh-green-04) !important;
								text-underline-offset: 2px;
								transition: all 0.2s ease;
								cursor: pointer;
								font-weight: 600;

								&:hover {
									color: var(--jh-green-02) !important;
									text-decoration-color: var(--jh-green-02) !important;
									text-decoration-thickness: 2px !important;
									background-color: rgba(var(--jh-green-04-rgb), 0.1);
									padding: 1px 2px;
									border-radius: 3px;
								}

								&:active {
									color: var(--jh-green-02) !important;
									transform: scale(0.98);
								}
							}

							// Suggested links styling
							.suggested-link {
								display: inline-flex;
								align-items: center;
								margin: 12px 0;
								padding: 8px 12px;
								background-color: rgba(var(--jh-green-04-rgb), 0.08);
								border: 1px solid var(--jh-green-02);
								border-radius: 6px;
								font-size: 14px;
								line-height: 1.4;
								transition: all 0.2s ease;
								color: var(--jh-green-04);

								&:hover {
									background-color: rgba(var(--jh-green-04-rgb), 0.12);
									border-color: var(--jh-green-04);
									transform: translateY(-1px);
									box-shadow: 0 2px 8px rgba(var(--jh-green-04-rgb), 0.15);
								}

								.suggested-label {
									color: var(--jh-green-04);
									font-weight: 600;
									margin-right: 6px;
									font-size: 12px;
									text-transform: uppercase;
									letter-spacing: 0.5px;
								}

								.suggested-link-text {
									color: var(--jh-green-04);
									text-decoration: none;
									font-weight: 500;
									transition: all 0.2s ease;

									&:hover {
										color: var(--jh-green-02);
										text-decoration: underline;
										text-decoration-color: var(--jh-green-02);
										text-underline-offset: 2px;
									}
								}

								* {
									color: var(--jh-green-04);
								}

								a {
									color: var(--jh-green-04);

									&:hover {
										color: var(--jh-green-02);
									}
								}
							}
						}
					}
				}
			}
		}

		&Ads {
			display: flex;
			flex: 0 1 auto;
			height: 26.88rem;

			@include breakpoint(medium, max) {
				display: none;
			}
		}
	}

	&Textarea {
		flex: 0 0 auto;
		width: 100%;
		padding: 0 1.5em;
	}
}

@keyframes typing {
	0%,
	80%,
	100% {
		transform: scale(0.8);
		opacity: 0.5;
	}
	40% {
		transform: scale(1);
		opacity: 1;
	}
}
