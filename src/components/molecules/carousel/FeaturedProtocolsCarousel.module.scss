@use '@/styles/mixins' as *;

.wrapper {
	display: flex;
	flex-direction: column;
	gap: 2em;
	width: 100%;

	.feature {
		display: flex;
		align-items: center;
		justify-content: space-between;
		width: 100%;

		.buttons {
			display: flex;
			align-items: center;
			gap: 0.5em;

			.button {
				background-color: var(--jh-green-01);
				color: var(--white);
				height: 2.5rem;
				width: 2.5rem;

				&:hover {
					background-color: rgba(var(--jh-green-01-rgb), 0.9);
				}

				&.disabled {
					opacity: 0.5;
					cursor: not-allowed;
				}
				.iconArrowLeft {
					@include icon('/icons/arrow-left.svg', 12px);
				}

				.iconArrowRight {
					@include icon('/icons/arrow-right.svg', 12px);
				}
			}
		}
	}

	.noProtocols {
		display: flex;
		justify-content: center;
		align-items: center;
		min-height: 17.5rem;
		width: 100%;
	}

	.noProtocols p {
		color: var(--jh-gray-01);
		font-size: 0.88rem;
		font-style: normal;
		font-weight: 500;
		line-height: 1.25rem;
	}

	.carousel {
		--gap: 1.25rem;
		--cols: 1; // columns visible at once (mobile default)

		display: grid;
		gap: var(--gap);
		grid-auto-flow: column dense; // fill topâ†’bottom, then make a new column
		grid-template-rows: 1fr; // 1 row on mobile
		grid-auto-rows: 1fr; // equal card heights per row

		/* size each implicit column so exactly --cols fit in the viewport */
		grid-auto-columns: calc((100% - (var(--cols) - 1) * var(--gap)) / var(--cols));

		overflow-x: auto;
		overscroll-behavior-inline: contain;
		scroll-snap-type: x mandatory;
		scroll-padding-inline: var(--gap);
		scroll-behavior: smooth;
		cursor: grab;
		user-select: none;

		/* tidy scrollbars */
		scrollbar-width: none;
		-webkit-overflow-scrolling: touch;

		&.dragging {
			cursor: grabbing;
			scroll-behavior: auto;
		}

		.skeleton {
			border-radius: 0.75rem;
			width: 100%;
			height: 100%;
			min-height: 17.5rem; /* same as your card height */
		}
	}
	.carousel::-webkit-scrollbar {
		display: none;
	}

	/* snap each column; snapping on both items per column is fine */
	.carousel > * {
		scroll-snap-align: start;
	}

	@include breakpoint(medium, min) {
		.carousel {
			grid-template-rows: repeat(2, 1fr);
			--cols: 1; // unchanged
		}

		/* map items to rows in groups of 4: [1,2] top, [3,4] bottom */
		.carousel > :nth-child(4n + 1),
		.carousel > :nth-child(4n + 2) {
			grid-row: 1;
		}

		.carousel > :nth-child(4n + 3),
		.carousel > :nth-child(4n + 4) {
			grid-row: 2;
		}
	}

	/* keep --cols: 2 at large and the mapping still works */
	@include breakpoint(wide, min) {
		.carousel {
			--cols: 2;
		}
	}

	.skeletonGroup {
		--gap: 1.25rem;
		--cols: 1;

		display: grid;
		gap: var(--gap);
		grid-auto-flow: column;
		grid-template-rows: 1fr;
		grid-auto-rows: 1fr;

		grid-auto-columns: calc((100% - (var(--cols) - 1) * var(--gap)) / var(--cols));

		.skeleton {
			border-radius: 0.75rem;
			height: 100%;
			width: 100%;
			min-height: 17.5rem;
		}

		/* breakpoints: 2 rows from md up, 2 columns visible (4 cards) from lg up */
		@include breakpoint(medium, min) {
			grid-template-rows: repeat(2, 1fr);
			--cols: 1;
		}
		@include breakpoint(large, min) {
			--cols: 2;
		}
	}

	.skeleton {
		border-radius: 0.75rem;
		height: 100%;
		width: 100%;
		min-height: 17.5rem;
	}
}
